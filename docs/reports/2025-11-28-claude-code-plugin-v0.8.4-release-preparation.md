# Claude Code 插件 v0.8.4 发布准备报告

**日期**: 2025-11-28
**版本**: v0.8.4
**插件**: common-tools
**维护者**: ruan-cat

## 1. 更新概述

本次更新为 common-tools Claude Code 插件的功能增强版本，主要新增了 git-mcp 配置代理，提升了对 GitHub 仓库的索引能力。

### 1.1 更新类型

- **功能增强**: 新增 `add-git-mcp` agent
- **配置更新**: 更新插件配置文件以包含新 agent
- **文档优化**: 更新相关文档说明

### 1.2 版本升级

- **从**: v0.8.3
- **到**: v0.8.4
- **升级类型**: Minor (向后兼容的新功能)

## 2. 新增功能详情

### 2.1 新增 Agent: add-git-mcp

#### 2.1.1 功能描述

新增的 `add-git-mcp` agent 用于在项目的 `.mcp.json` 文件中配置 git-mcp 服务器，实现对 GitHub 仓库源码的精准索引。

#### 2.1.2 核心特性

- **自动化配置**: 支持通过 GitHub 仓库地址自动生成标准的 git-mcp 配置
- **标准化命名**: 采用 `gitmcp__{repo}__{owner}` 的命名格式
- **双重策略**: 支持命令行和手动配置两种添加方式
- **精准索引**: 避免代码幻觉，提供准确的 GitHub 仓库内容索引

#### 2.1.3 使用场景

- 需要索引特定 GitHub 仓库源码进行开发参考
- 避免 AI 生成代码时的幻觉问题
- 标准化 MCP 服务器配置管理

#### 2.1.4 配置示例

```json
{
	"mcpServers": {
		"gitmcp__uni-z-paging__SmileZXLee": {
			"type": "http",
			"url": "https://gitmcp.io/SmileZXLee/uni-z-paging"
		}
	}
}
```

## 3. 更新内容详细清单

### 3.1 文件更新

| 文件路径                          | 更新类型 | 更新内容                    |
| --------------------------------- | -------- | --------------------------- |
| `CHANGELOG.md`                    | 新增     | 添加 v0.8.4 版本更新日志    |
| `README.md`                       | 更新     | 版本号更新、新增 agent 说明 |
| `.claude-plugin/plugin.json`      | 更新     | 版本号升级、新增 agent 引用 |
| `.claude-plugin/marketplace.json` | 更新     | 版本号升级                  |
| `agents/add-git-mcp.md`           | 新增     | git-mcp 配置代理定义文件    |

### 3.2 配置更新

#### 3.2.1 plugin.json 更新

```json
{
	"name": "common-tools",
	"version": "0.8.4",
	"agents": [
		"./agents/format-markdown.md",
		"./agents/migrate-iconify-use-pure-admin.md",
		"./agents/add-git-mcp.md" // 新增
	]
}
```

#### 3.2.2 marketplace.json 更新

```json
{
	"metadata": {
		"version": "0.8.4"
	},
	"plugins": [
		{
			"name": "common-tools",
			"version": "0.8.4"
		}
	]
}
```

### 3.3 文档更新

#### 3.3.1 README.md 更新

- 版本号从 0.8.3 更新到 0.8.4
- 新增 v0.8.4 版本特性说明
- 在 Agents 部分添加 `add-git-mcp` 代理说明

#### 3.3.2 CHANGELOG.md 更新

新增 v0.8.4 版本条目，包含：

- 新增功能描述
- 配置更新说明
- 文档优化说明

## 4. 质量保证

### 4.1 更新验证

- ✅ 所有配置文件格式正确
- ✅ 新增 agent 文件符合规范
- ✅ 版本号同步更新
- ✅ 文档内容准确完整

### 4.2 向后兼容性

- ✅ 现有功能保持不变
- ✅ 配置格式向后兼容
- ✅ 不会影响现有用户使用

### 4.3 测试建议

建议在发布后进行以下测试：

1. **新功能测试**:
   - 测试 `add-git-mcp` agent 的正常工作
   - 验证生成的 git-mcp 配置格式正确
   - 确认命令行和手动配置两种方式都有效

2. **兼容性测试**:
   - 确认现有 agents 和 commands 正常工作
   - 验证 hooks 系统不受影响

3. **文档测试**:
   - 确认文档链接和示例正确
   - 验证使用说明清晰易懂

## 5. 发布检查清单

### 5.1 发布前检查

- [x] 版本号正确更新到 0.8.4
- [x] 更新日志完整准确
- [x] 所有配置文件同步更新
- [x] 新增功能经过测试验证
- [x] 文档内容完整正确

### 5.2 发布后验证

- [ ] 插件市场正常显示新版本
- [ ] 用户能够正常更新到新版本
- [ ] 新功能在实际环境中正常工作
- [ ] 没有收到用户的兼容性问题反馈

## 6. 风险评估

### 6.1 技术风险

- **低风险**: 本次更新为纯新增功能，不涉及现有功能的修改
- **影响范围**: 仅影响使用新功能的用户
- **回滚方案**: 如有问题可快速回滚到 v0.8.3

### 6.2 用户体验风险

- **低风险**: 新功能为可选使用，不影响现有工作流
- **学习成本**: 新 agent 使用简单，学习成本低

## 7. 后续计划

### 7.1 短期计划

- 监控用户反馈，及时处理可能出现的问题
- 收集用户对新功能的使用体验和建议

### 7.2 长期计划

- 考虑扩展更多 MCP 服务器类型的支持
- 优化 git-mcp 配置的用户体验
- 探索更多代码索引和避免幻觉的解决方案

## 8. 总结

本次 v0.8.4 版本更新成功为 common-tools 插件增加了 git-mcp 配置功能，提升了用户对 GitHub 仓库的索引能力。更新过程顺利，所有配置文件和文档都已完成相应更新，具备发布条件。

**更新亮点**:

- 新增实用功能，解决开发中的实际问题
- 保持向后兼容，不影响现有用户
- 文档完善，用户体验良好
- 技术实现简单可靠，风险可控

---

**报告生成时间**: 2025-11-28
**下次更新计划**: 根据用户反馈和功能需求确定

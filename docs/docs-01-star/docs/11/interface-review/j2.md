# j2

::: tip 负责项

- 【j2】配置管理（19）、组织管理（角色权限、数据权限）（23）

:::

## 在线评审视频链接

- [2025-6-1-001-配置管理（19）接口评审](https://meeting.tencent.com/crm/l7La9L1d6b)

## 整体评审

1. 字典类型，要整体性的增加【字典类型编码】字段。前端会高强度的使用该字段来查询数据字典项列表的

### 需要约会议面谈

负责**字典类型**和**字典项**的同学，需要和前端拉会议谈，这部分接口设计不合适。

## 获取配置项名称列表

[/configmanager/c-mapping-domain/all-domain-name](https://app.apifox.com/link/project/6386631/apis/api-300153399)

1. 在配置中心页面内，左侧侧边栏按钮需要改接口，补全配置项编码。即满足脑图所讲的字段（唯一标识、编码、名称）。

::: details

1. 脑图说明了需要字段：

![2025-06-01-14-49-51](https://s2.loli.net/2025/06/01/GJyWrNniRl6gFYc.png)

2. 用于此处渲染菜单：

![2025-06-01-14-47-42](https://s2.loli.net/2025/06/01/a8BX1QVqN7cyeAn.png)

3. 请补全字段：

![2025-06-01-14-51-05](https://s2.loli.net/2025/06/01/evi4yd39nZ8F5AJ.png)

:::

2. 再多加字段，配置项描述。用于在配置中心内显示描述字段。

::: details 配置中心页面，前端需要该字段展示效果

![2025-06-01-15-00-48](https://s2.loli.net/2025/06/01/pR6WhT5Jslak3Fy.png)

:::

## 获取配置列表（条件+分页）

[/configmanager/config/query](https://app.apifox.com/link/project/6386631/apis/api-300153405)

1. 不能用配置项的中文名称来查询右侧的表格数据。应该用配置项的id来查询。因为中文名称是可以更改的。

::: details

![2025-06-01-14-57-24](https://s2.loli.net/2025/06/01/uPkfwYOSoKAegHJ.png)

:::

2. 在返回响应中，【配置项编号】字段，应该是必填字段。

::: details 【配置项编号】字段，应该是必填字段

![2025-06-01-15-09-31](https://s2.loli.net/2025/06/01/zyPbxXLYpSoM1lG.png)

:::

## 添加配置

[/configmanager/config/add](https://app.apifox.com/link/project/6386631/apis/api-300153403)

1. 备注更改注释。改成【配置项编码】，避免前端误解。

::: details 备注改名即可

![2025-06-01-15-06-04](https://s2.loli.net/2025/06/01/yobAuFiBs4rTcRj.png)

:::

## 删除配置

[/configmanager/config/delete](https://app.apifox.com/link/project/6386631/apis/api-300153404)

1. 删除时，id要做必填校验。

::: details 删除id做必填校验

![2025-06-01-15-11-42](https://s2.loli.net/2025/06/01/ntCdGpx1WIAwKhq.png)

:::

## 添加字典类型

[/configmanager/dict-spec/add](https://app.apifox.com/link/project/6386631/apis/api-300153407)

1. 字段缺漏。和字典类型列表、编辑接口所需的字段对不上。需要补全。

::: details

![2025-06-01-15-19-25](https://s2.loli.net/2025/06/01/dqhNR6bILOnM8ci.png)

:::

## 获取字典类型名称列表

[/configmanager/dict-spec/query-names](https://app.apifox.com/link/project/6386631/apis/api-300153411)

1. 返回响应，字段缺漏。应该补全字典类型实体应该有的名称与id字段。

::: details

![2025-06-01-15-18-55](https://s2.loli.net/2025/06/01/aDRpZFine43IHcW.png)

:::

## 添加字典

[/configmanager/sys/add-t_dict](https://app.apifox.com/link/project/6386631/apis/api-300153412)

1. id是什么谁的字段？是【字典类型id】么？需要解释。
2. 前端不可能去给后端存储【字典类型】的中文名称的，应该存储【字典类型】的id。

::: details

![2025-06-01-15-24-43](https://s2.loli.net/2025/06/01/tCwxJyarOzpgj3B.png)

:::

## 修改字典

[/configmanager/sys/modify-t_dict](https://app.apifox.com/link/project/6386631/apis/api-300153413)

1. 修改【字典项】时，不需要传递【字典类型】的任何字段。

::: details

![2025-06-01-15-28-19](https://s2.loli.net/2025/06/01/NC2AioyQXluHk8j.png)

:::

## 获取字典列表(条件+分页)

[/configmanager/sys/query-t_dict](https://app.apifox.com/link/project/6386631/apis/api-300153415)

1. 名称、字典类型、值。这三个查询条件不可能是必填的，是可选的。
2. 查询条件【字典类型】specName，前端不可能传递中文名称来查询，应该传递【字典类型id】来查询。

::: details

![2025-06-01-15-31-32](https://s2.loli.net/2025/06/01/ArvSlnc45De2kTj.png)

:::

## 获取字典名称列表

这是高频调用的接口。该接口设计全错了。需要**开会当面谈**。

::: details

1. 需要的字段都没有给足。

![2025-06-01-15-37-33](https://s2.loli.net/2025/06/01/p1StDvLUoCdYiuR.png)

2. 该接口只需要传递唯一一个【字典类型编码】字段即可。其他的字段全部都无意义。

![2025-06-01-15-41-01](https://s2.loli.net/2025/06/01/MopZqXBbd83Chag.png)

:::

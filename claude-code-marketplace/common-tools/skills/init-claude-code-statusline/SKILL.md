---
name: init-claude-code-statusline
description: åˆå§‹åŒ–ã€æ›´æ–°æˆ–è¦†ç›– Claude Code çŠ¶æ€æ é…ç½®æ–‡ä»¶ï¼ˆ.claude/settings.json å’Œ .claude/statusline.shï¼‰ã€‚ç”¨äºŽåœ¨ä»»ä½•é¡¹ç›®ä¸­å¿«é€Ÿæ­å»º Claude Code çŠ¶æ€æ æ˜¾ç¤ºåŠŸèƒ½ï¼Œå±•ç¤ºç›®å½•ã€Git åˆ†æ”¯ã€æ¨¡åž‹ã€ç‰ˆæœ¬å’Œä¸Šä¸‹æ–‡çª—å£ä½¿ç”¨æƒ…å†µã€‚
user-invocable: true
metadata:
  version: "0.14.0"
---

# åˆå§‹åŒ– Claude Code çŠ¶æ€æ é…ç½®

æœ¬æŠ€èƒ½ç”¨äºŽåœ¨ä»»ä½•é¡¹ç›®ä¸­åˆå§‹åŒ–ã€æ›´æ–°æˆ–å…¨é‡è¦†ç›– Claude Code çš„çŠ¶æ€æ é…ç½®ã€‚é€šè¿‡é¢„è®¾çš„æ¨¡æ¿æ–‡ä»¶ï¼Œå¸®åŠ©ç”¨æˆ·å¿«é€Ÿæ­å»ºåŠŸèƒ½ä¸°å¯Œçš„çŠ¶æ€æ æ˜¾ç¤ºã€‚

## çŠ¶æ€æ åŠŸèƒ½è¯´æ˜Ž

é…ç½®å®ŒæˆåŽï¼ŒClaude Code çŠ¶æ€æ å°†æ˜¾ç¤ºä»¥ä¸‹ä¿¡æ¯ï¼š

|  æ˜¾ç¤ºé¡¹ç›®  | å›¾æ ‡ |                 è¯´æ˜Ž                 |
| :--------: | :--: | :----------------------------------: |
|  å½“å‰ç›®å½•  |  æ—   | æ˜¾ç¤ºå·¥ä½œç›®å½•è·¯å¾„ï¼ˆ~æ›¿æ¢ç”¨æˆ·ä¸»ç›®å½•ï¼‰  |
|  Git åˆ†æ”¯  |  ðŸŒ¿  |        æ˜¾ç¤ºå½“å‰ Git åˆ†æ”¯åç§°         |
|  æ¨¡åž‹åç§°  |  ðŸ¤–  |      æ˜¾ç¤ºå½“å‰ä½¿ç”¨çš„ Claude æ¨¡åž‹      |
|   ç‰ˆæœ¬å·   |  v   |        æ˜¾ç¤º Claude Code ç‰ˆæœ¬         |
| ä¸Šä¸‹æ–‡çª—å£ |  ðŸ§   | æ˜¾ç¤ºå‰©ä½™ä¸Šä¸‹æ–‡çª—å£ç™¾åˆ†æ¯”ï¼ˆé¢œè‰²ç¼–ç ï¼‰ |

### ä¸Šä¸‹æ–‡çª—å£é¢œè‰²è¯´æ˜Ž

- **ç»¿è‰²**ï¼šå‰©ä½™ > 40%ï¼Œä¸Šä¸‹æ–‡å……è¶³
- **é»„è‰²**ï¼šå‰©ä½™ 20% - 40%ï¼Œä¸Šä¸‹æ–‡ä¸­ç­‰
- **çº¢è‰²**ï¼šå‰©ä½™ < 20%ï¼Œä¸Šä¸‹æ–‡ä¸è¶³

---

## æŠ€èƒ½ç›®å½•ç»“æž„

```plain
init-claude-code-statusline/
â”œâ”€â”€ SKILL.md                      # æŠ€èƒ½è¯´æ˜Žæ–‡ä»¶
â””â”€â”€ templates/                     # æ¨¡æ¿æ–‡ä»¶ç›®å½•
    â”œâ”€â”€ settings.json             # Claude Code è®¾ç½®æ–‡ä»¶æ¨¡æ¿
    â””â”€â”€ statusline.sh             # çŠ¶æ€æ è„šæœ¬æ¨¡æ¿
```

---

## 1. å¿…é¡»åˆ›å»º/ä¿®æ”¹çš„é…ç½®æ–‡ä»¶

### 1.1. åˆ›å»º `.claude/settings.json`

ä»Žæ¨¡æ¿å¤åˆ¶ï¼šå‚è§ [templates/settings.json](./templates/settings.json)

**æ¨¡æ¿å†…å®¹ï¼š**

```json
{
	"statusLine": {
		"type": "command",
		"command": "bash .claude/statusline.sh",
		"padding": 0
	}
}
```

### 1.2. åˆ›å»º `.claude/statusline.sh`

ä»Žæ¨¡æ¿å¤åˆ¶ï¼šå‚è§ [templates/statusline.sh](./templates/statusline.sh)

**æ¨¡æ¿åŠŸèƒ½è¯´æ˜Žï¼š**

1. **é¢œè‰²æ”¯æŒ**ï¼šä½¿ç”¨ ANSI é¢œè‰²ä»£ç ç¾ŽåŒ–è¾“å‡º
2. **jq å…¼å®¹**ï¼šè‡ªåŠ¨æ£€æµ‹ jq å¯ç”¨æ€§ï¼Œä¼˜é›…é™çº§
3. **Git é›†æˆ**ï¼šæ˜¾ç¤ºå½“å‰åˆ†æ”¯æˆ– commit hash
4. **ä¸Šä¸‹æ–‡è®¡ç®—**ï¼šè®¡ç®—å¹¶æ˜¾ç¤ºå‰©ä½™ä¸Šä¸‹æ–‡çª—å£ç™¾åˆ†æ¯”
5. **é¢œè‰²ç¼–ç **ï¼šæ ¹æ®ä¸Šä¸‹æ–‡å‰©ä½™é‡åŠ¨æ€è°ƒæ•´é¢œè‰²

---

## 2. æ‰§è¡Œæµç¨‹

### æ­¥éª¤ 1ï¼šæ£€æŸ¥ç›®æ ‡ç›®å½•

1. æ£€æŸ¥é¡¹ç›®æ ¹ç›®å½•æ˜¯å¦å­˜åœ¨ `.claude/` ç›®å½•
2. å¦‚æžœä¸å­˜åœ¨ï¼Œåˆ›å»º `.claude/` ç›®å½•

### æ­¥éª¤ 2ï¼šå¤„ç† settings.json

1. æ£€æŸ¥æ˜¯å¦å­˜åœ¨ `.claude/settings.json` æ–‡ä»¶
2. å¦‚æžœå­˜åœ¨ï¼š
   - ä½¿ç”¨ `AskUserQuestion` å·¥å…·è¯¢é—®ç”¨æˆ·é€‰æ‹©æ“ä½œæ–¹å¼ï¼š
     - **åˆå¹¶é…ç½®**ï¼šä¿ç•™çŽ°æœ‰é…ç½®ï¼Œä»…æ·»åŠ /æ›´æ–° `statusLine` é…ç½®é¡¹
     - **å…¨é‡è¦†ç›–**ï¼šç”¨æ¨¡æ¿å®Œå…¨æ›¿æ¢çŽ°æœ‰æ–‡ä»¶
     - **è·³è¿‡**ï¼šä¸ä¿®æ”¹æ­¤æ–‡ä»¶
3. å¦‚æžœä¸å­˜åœ¨ï¼š
   - ç›´æŽ¥ä½¿ç”¨æ¨¡æ¿åˆ›å»ºæ–‡ä»¶

### æ­¥éª¤ 3ï¼šå¤„ç† statusline.sh

1. æ£€æŸ¥æ˜¯å¦å­˜åœ¨ `.claude/statusline.sh` æ–‡ä»¶
2. å¦‚æžœå­˜åœ¨ï¼š
   - ä½¿ç”¨ `AskUserQuestion` å·¥å…·è¯¢é—®ç”¨æˆ·æ˜¯å¦è¦†ç›–
3. å¦‚æžœä¸å­˜åœ¨ï¼š
   - ç›´æŽ¥ä½¿ç”¨æ¨¡æ¿åˆ›å»ºæ–‡ä»¶

### æ­¥éª¤ 4ï¼šéªŒè¯é…ç½®

1. ç¡®è®¤ `.claude/settings.json` æ–‡ä»¶æ ¼å¼æ­£ç¡®ï¼ˆæœ‰æ•ˆçš„ JSONï¼‰
2. ç¡®è®¤ `.claude/statusline.sh` æ–‡ä»¶å­˜åœ¨ä¸”å…·æœ‰æ­£ç¡®çš„ shebang

---

## 3. è‡ªæ£€æ¸…å•

å®Œæˆåˆå§‹åŒ–åŽï¼Œè¯·é€é¡¹æ£€æŸ¥ä»¥ä¸‹å†…å®¹ï¼š

- [ ] 1. **ç›®å½•å­˜åœ¨**ï¼š`.claude/` ç›®å½•å·²åˆ›å»º
- [ ] 2. **é…ç½®æ–‡ä»¶å­˜åœ¨**ï¼š
  - [ ] `.claude/settings.json` å­˜åœ¨
  - [ ] `.claude/statusline.sh` å­˜åœ¨
- [ ] 3. **JSON æ ¼å¼æ­£ç¡®**ï¼š`settings.json` å¯è¢«æ­£ç¡®è§£æž
- [ ] 4. **è„šæœ¬å¯æ‰§è¡Œ**ï¼š`statusline.sh` åŒ…å«æ­£ç¡®çš„ shebangï¼ˆ`#!/bin/bash`ï¼‰
- [ ] 5. **åŠŸèƒ½éªŒè¯**ï¼šé‡å¯ Claude Code åŽçŠ¶æ€æ æ­£å¸¸æ˜¾ç¤º

---

## 4. æ³¨æ„äº‹é¡¹

### æ‰§è¡Œè¦æ±‚

1. **ç›®å½•åˆ›å»º**ï¼šå¦‚æžœ `.claude/` ç›®å½•ä¸å­˜åœ¨ï¼Œå¿…é¡»å…ˆåˆ›å»º
2. **è¯¢é—®ç¡®è®¤**ï¼šè¦†ç›–çŽ°æœ‰æ–‡ä»¶å‰å¿…é¡»è¯¢é—®ç”¨æˆ·
3. **JSON æ ¼å¼**ï¼šç¡®ä¿ `settings.json` æ˜¯æœ‰æ•ˆçš„ JSON æ ¼å¼
4. **è„šæœ¬æ ¼å¼**ï¼šç¡®ä¿ `statusline.sh` ä¿ç•™æ­£ç¡®çš„ shebangï¼ˆ`#!/bin/bash`ï¼‰

### ä¾èµ–è¯´æ˜Ž

çŠ¶æ€æ è„šæœ¬å¯¹ä»¥ä¸‹å·¥å…·æœ‰å¯é€‰ä¾èµ–ï¼š

| å·¥å…· | å¿…éœ€ |               è¯´æ˜Ž               |
| :--: | :--: | :------------------------------: |
| bash |  æ˜¯  |           è„šæœ¬è¿è¡ŒçŽ¯å¢ƒ           |
| git  |  å¦  |      ç”¨äºŽæ˜¾ç¤º Git åˆ†æ”¯ä¿¡æ¯       |
|  jq  |  å¦  | ç”¨äºŽè§£æž JSON è¾“å…¥ï¼Œæ— åˆ™ä¼˜é›…é™çº§ |

### å…¼å®¹æ€§è¯´æ˜Ž

1. **Windows ç”¨æˆ·**ï¼šéœ€è¦ç¡®ä¿ç³»ç»Ÿä¸­å®‰è£…äº† bashï¼ˆGit Bashã€WSL æˆ–å…¶ä»–ï¼‰
2. **é¢œè‰²æ”¯æŒ**ï¼šå¦‚æžœç»ˆç«¯ä¸æ”¯æŒé¢œè‰²ï¼Œå¯è®¾ç½® `NO_COLOR` çŽ¯å¢ƒå˜é‡ç¦ç”¨é¢œè‰²
3. **jq ç¼ºå¤±**ï¼šè„šæœ¬ä¼šè‡ªåŠ¨æ£€æµ‹ jq å¯ç”¨æ€§ï¼Œç¼ºå¤±æ—¶ä½¿ç”¨é»˜è®¤å€¼

---

## 5. è§¦å‘åœºæ™¯

æœ¬æŠ€èƒ½åº”åœ¨ä»¥ä¸‹åœºæ™¯**ä¸»åŠ¨è°ƒç”¨**ï¼š

### æ˜Žç¡®è§¦å‘

1. ç”¨æˆ·æåŠ "init-claude-code-statusline"
2. ç”¨æˆ·æåŠ "åˆå§‹åŒ–çŠ¶æ€æ "
3. ç”¨æˆ·æåŠ "é…ç½® Claude Code çŠ¶æ€æ "
4. ç”¨æˆ·æåŠ "æ›´æ–°çŠ¶æ€æ é…ç½®"

### ä¸Šä¸‹æ–‡è§¦å‘

5. ç”¨æˆ·è¯¢é—®å¦‚ä½•è‡ªå®šä¹‰ Claude Code çŠ¶æ€æ 
6. ç”¨æˆ·æŠ±æ€¨çŠ¶æ€æ æ˜¾ç¤ºä¸æ­£å¸¸
7. ç”¨æˆ·æƒ³è¦åœ¨æ–°é¡¹ç›®ä¸­ä½¿ç”¨è‡ªå®šä¹‰çŠ¶æ€æ 

---

## å‚è€ƒèµ„æº

- **Claude Code æ–‡æ¡£**: https://code.claude.com/docs/zh-CN/skills
- **æŠ€èƒ½æœ€ä½³å®žè·µ**: https://platform.claude.com/docs/zh-CN/agents-and-tools/agent-skills/best-practices

---
name: init-ai-md
description: 初始化和增量更新 AI 记忆文件（CLAUDE.md、AGENTS.md、GEMINI.md）。将预设的通用提示词模板按顺序插入到记忆文件中。触发条件：当用户提及初始化记忆文件、更新 CLAUDE.md、同步 AI 记忆、init-ai-md 等关键词时主动调用。
user-invocable: true
---

# init-ai-md 技能说明

本技能用于在项目中快速初始化和增量更新 AI 记忆文件。通过预设的通用提示词模板，帮助用户建立统一规范的 AI 记忆文件体系。

## 核心功能

1. **初始化 CLAUDE.md**：检查并创建项目的 AI 记忆文件
2. **增量更新**：将模板内容智能合并到现有记忆文件中
3. **多文件同步**：支持同步更新 AGENTS.md 和 GEMINI.md

## 执行流程

### 步骤 1：检查 CLAUDE.md 文件

1. 检查项目根目录是否存在 `CLAUDE.md` 文件
2. 如果不存在：
   - 先执行 Claude Code 内部的 `/init` 斜杠命令
   - 确保生成的 `CLAUDE.md` 文件以**中文**编写
3. 如果已存在：
   - 读取现有内容，准备进行增量更新

### 步骤 2：读取模板文件

1. 读取 `templates/` 目录下的所有模板文件
2. 模板文件按照**数字前缀顺序**排序（如 `01.xxx.md`、`02.xxx.md`）
3. 每个模板文件包含一个或多个**二级目录**内容

### 步骤 3：智能合并策略

1. **相似度检测**：检查 CLAUDE.md 中是否已存在与模板相似的内容
2. **更新策略**：
   - 如果存在相似内容：用模板内容替换现有内容
   - 如果不存在：在文档**现有二级目录之前**插入模板内容
3. **保持格式**：
   - 模板内容以二级目录形式插入
   - 二级目录标题以模板文档内的标题为准（非文件名）
   - 保持原有文档结构不变

### 步骤 4：同步其他 AI 记忆文件

1. 检查项目根目录是否存在 `AGENTS.md` 或 `GEMINI.md` 文件
2. 如果存在这些文件：
   - **必须**使用 `AskUserQuestion` 工具询问用户
   - 询问是否用更新后的 `CLAUDE.md` 全量替换这些文件
3. 根据用户选择执行替换操作

## 模板文件规范

### 目录结构

```plain
init-ai-md/
├── SKILL.md              # 技能说明文件
└── templates/            # 模板文件目录
    ├── 01.主动问询实施细节.md
    ├── 02.编写测试用例规范.md
    ├── 03.报告编写规范.md
    ├── 04.生成发版日志的操作规范.md
    └── 99.获取技术栈对应的上下文.md
```

### 模板文件命名规范

- **前缀**：两位数字（01-99），决定插入顺序
- **分隔符**：使用英文句点 `.`
- **名称**：中文描述性名称
- **后缀**：`.md`

### 模板内容规范

1. 模板文件**只包含二级目录**，不包含一级目录
2. 单个模板可包含多个二级目录
3. 二级目录标题即为插入后的章节标题
4. 内容使用简体中文编写

## 执行示例

### 场景 1：全新项目初始化

```markdown
用户：请帮我初始化 AI 记忆文件

执行流程：

1. 检测到无 CLAUDE.md → 执行 /init 命令
2. 读取 templates/ 目录下所有模板
3. 按序号顺序插入模板内容到 CLAUDE.md
4. 检测到无 AGENTS.md/GEMINI.md → 完成
```

### 场景 2：增量更新现有项目

```markdown
用户：请更新我的 CLAUDE.md 记忆文件

执行流程：

1. 检测到已有 CLAUDE.md → 读取现有内容
2. 读取 templates/ 目录下所有模板
3. 对比相似度，智能合并内容
4. 检测到存在 AGENTS.md → 询问用户是否同步替换
5. 用户确认后执行替换
```

## 触发场景

本技能应在以下场景**主动调用**：

### 明确触发

1. 用户提及 "init-ai-md"
2. 用户提及 "初始化记忆文件"
3. 用户提及 "更新 CLAUDE.md"
4. 用户提及 "同步 AI 记忆"

### 上下文触发

5. 用户新建项目时（建议初始化）
6. 用户克隆项目后首次使用 Claude Code
7. 用户询问如何规范化 AI 记忆文件
8. 用户抱怨 AI 记忆文件内容混乱或缺失

## 注意事项

### 执行要求

1. **中文优先**：所有生成和更新的内容必须使用简体中文
2. **顺序插入**：严格按照模板文件的数字前缀顺序插入
3. **标题来源**：使用模板内的二级目录标题，而非文件名
4. **前置插入**：模板内容插入到原有二级目录**之前**
5. **询问确认**：同步 AGENTS.md/GEMINI.md 前必须询问用户

### 格式保持

1. 保持原有文档的一级标题不变
2. 保持原有文档的项目特定内容不变
3. 仅更新/插入通用提示词部分

### 相似度判断

判断内容相似的依据：

- 二级目录标题相同或高度相似
- 章节内容主题一致
- 关键词重复度高

## 模板内容参考

详细的模板内容请查看 [templates/](templates/) 目录下的各个模板文件。

---

## 参考资源

- **Claude Code 文档**: https://code.claude.com/docs/zh-CN/skills
- **技能最佳实践**: https://platform.claude.com/docs/zh-CN/agents-and-tools/agent-skills/best-practices
